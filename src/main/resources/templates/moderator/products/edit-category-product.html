<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:include="~{fragments/header}"></th:block>
</head>

<body>

<header>
    <th:block th:include="~{fragments/navbar}"></th:block>
</header>

<div class="d-flex justify-content-center mt-5">
    <div class="col-md-5 col-lg-5 col-sm-5">
        <form class="card" th:action="@{/moderator/products/edit/category/{id}(id=${product.id})}" th:method="post"
              th:object="${productAddBindingModel}">
            <input type="hidden" name="_csrf" th:field="${product.id}">
            <h5 class="card-title fw-400 mt-4 m-lg-3 text-center">Редактирай категория</h5>
            <div class="card-body">
                <div class="form-group">
                    <div class="mt-2"><span class="text-sm">Стара категория</span></div>
                    <input th:value="${product.category.name}" class="form-control" type="text"
                           placeholder="" readonly>
                </div>

                <div class="form-group">
                    <div class="mt-3">
                        <label class="font-weight-bold" for="add-product-categories">Нова категория</label>
                        <select class="form-select form-select-sm mb-3" id="add-product-categories" name="category">
                            <option selected="">--- Избери Категория ---</option>
                        </select>
                    </div>
                </div>

                <button class="btn btn-block btn-bold btn-primary warning mt-4">Обнови</button>
            </div>
        </form>
    </div>
</div>


<footer>
    <th:block th:include="~{fragments/footer}"></th:block>
</footer>

<script>
    fetch('/moderator/categories/fetch')
        .then((response) => response.json())
        .then((json) => {
            json
                .forEach((category) =>
                    $('#add-product-categories')
                        .append(`<option value="${category.id}">${category.name}</option>`));
        })
        .catch((err) => console.log(err));
</script>
</body>

</html>